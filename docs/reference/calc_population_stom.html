<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Compilation of observed stomach contents into population diet — calc_population_stom • FishStomachs</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Compilation of observed stomach contents into population diet — calc_population_stom"><meta property="og:description" content="Stratification of data must first be done by the function add_strata.
With stratification added diet data are firstly compiled for each sub_strata (e.g. ICES rectangles),
then compiled by strata (e.g. ICES roundfish areas)
and finally compiled for the whole population area.
The methods for data compilations must be provided in the control object to the input data, see Details."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FishStomachs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/FishStomachs.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/ex01_Read_and_manipulate_data.html">example 01: Read and manipulate data</a>
    </li>
    <li>
      <a href="../articles/ex02_More_data_manipulations.html">Example 02: More data manipulations</a>
    </li>
    <li>
      <a href="../articles/ex03_Estimate_population_diet.html">Example 03: Estimate population diet</a>
    </li>
    <li>
      <a href="../articles/ex04_Population_diet.html">Example 04: Population diet</a>
    </li>
    <li>
      <a href="../articles/ex05_Create_data_for_model.html">Example 05:Create data for model</a>
    </li>
    <li>
      <a href="../articles/ex06_Bootstrapping.html">Example 06 Bootstrapping</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compilation of observed stomach contents into population diet</h1>
    
    <div class="hidden name"><code>calc_population_stom.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Stratification of data must first be done by the function <code><a href="add_strata.html">add_strata</a></code>.
With stratification added diet data are firstly compiled for each sub_strata (e.g. ICES rectangles),
then compiled by strata (e.g. ICES roundfish areas)
and finally compiled for the whole population area.
The methods for data compilations must be provided in the control object to the input data, see Details.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_population_stom</span><span class="op">(</span><span class="va">s</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>s</dt>
<dd><p>Stomach data set of class STOMobs. It is assumed that the stomach contents weight correspond to the
number of stomachs, i.e. the stomach contents for a single predator, or the sum of preys if the sample includes more than one
predator (stomach).</p></dd>


<dt>verbose</dt>
<dd><p>Logical, show details</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Diet data set of class STOMdiet</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The compilation method must be specified in the control attribute by the slots.
<code>@calc_sub_strata, @calc_strata</code> and <code>@calc_total</code>.
Each of the slots must include a list
with the following names <code>relative_weight</code> (type=boolean), <code>weighting_factor</code> (type=expression)
and <code>weighting_factor_file</code> (type character). An example of such input is shown below:</p>
<div class="sourceCode"><pre><code>
hom&lt;-edit_control(hom,
 calc_sub_strata=list(
    # do not transform into relative weight before data are compiled
   relative_weight=FALSE,
    # use number of stomachs (n_tot) as weighting factor
   weighting_factor=expression(n_tot),
    # do not use data from external file
   weighting_factor_file=NA
 ),
 calc_strata=list(
   # weight mean stomach contents by sub_strata by the square root of the mean CPUE within the sub_strata
  relative_weight=TRUE,
  weighting_factor=expression(sqrt(pred_cpue)),
  weighting_factor_file=NA
 )
 calc_total=list(
   relative_weight=TRUE,
   weighting_factor=NA,
   weighting_factor_file=file.path(config_dir,'hom_weighting_total.csv')
))
</code></pre></div>

<p>The <code>calc_sub_strata</code> list specifies that the observed stomach contents by samples should not be translated
into a relative stomach contents by sample (relative_weight=FALSE) before processed. In cases with more samples from a
sub_strata, the average stomach contents within the sub_strata should be calculated as a weighted mean where the number of stomachs
sampled (n_tot) is used as weighting factor. Note that you have to use "expression" if you refer to a variable (in this case, n_tot)
withinh the data set.</p>
<p>The <code>calc_strata</code> list specified that the average stomach contents by sub_strata initially should be transformed
into relative stomach contents by sub_strata (relative_weight=TRUE). The average stomach contents within a stratum
should the be calculated as a weighted mean using the squaret root of the CPUE as weighting factor.</p>
<p>The average stomach contents, specified by the list <code>calc_total</code> should be calculated as a weighed mean of
the relative stomach contents by stratum weighted by a factor provided in the file hom_weighting_total.csv.
Some rows from the file are shown below:</p>
<div class="sourceCode"><pre><code>
pred_name, stratum_time, pred_size, stratum_area, w_fac_area
HOM,       1991-Q3,      0250-0300,  R-2,         25
HOM,       1991-Q3,      0350-0400,  R-2,          2
HOM,       1991-Q3,      0300-0350,  R-2,         25
HOM,       1991-Q4,      0250-0300,  R-3,         19
HOM,       1991-Q4,      0350-0400,  R-1,         45
</code></pre></div><p>The file specifies which weighting factor, <code>w_fac_area</code>, that should be used for a given
predator and predator size, within a given temporal (time) stratum and area stratum. See
<code><a href="make_template_strata_weighting.html">make_template_strata_weighting</a></code> for how to make such file with the right format.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Morten Vinther.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

